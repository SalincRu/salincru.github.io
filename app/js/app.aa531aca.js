(function(t){function e(e){for(var o,a,r=e[0],u=e[1],l=e[2],p=0,f=[];p<r.length;p++)a=r[p],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&f.push(s[a][0]),s[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(t[o]=u[o]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,r=1;r<n.length;r++){var u=n[r];0!==s[u]&&(o=!1)}o&&(i.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},s={app:0},i=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/app/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var c=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"07af":function(t,e,n){},"1bc3":function(t,e,n){},"32ae":function(t,e,n){},"567f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d"),n("534e"),n("f89d"),n("5363");var o=n("2b0e"),s=n("b29a"),i=n.n(s),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-navigator",{attrs:{swipeable:"","page-stack":t.pageStack}})},r=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"center"},[t._v("Расписание СИК")]),n("div",{staticClass:"right"},[n("v-ons-toolbar-button",[n("v-ons-icon",{attrs:{icon:"mdi-settings"},on:{click:t.openSettings}})],1)],1)]),n("v-ons-tabbar",{attrs:{swipeable:"",position:"auto",visible:!0,tabs:t.tabs}})],1)},l=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-pull-hook",{attrs:{action:t.updateRasp,"fixed-content":t.md(),"on-pull":t.md()&&t.onPull||null,height:t.md()?84:64},on:{changestate:function(e){t.state=e.state}}},[t.md()?n("div",{staticClass:"pull-hook-progress"},[n("v-ons-progress-circular",{style:{transform:"rotate("+t.ratio+"turn)"},attrs:{value:100*t.ratio,indeterminate:"action"===t.state}})],1):n("v-ons-icon",{staticClass:"pull-hook-spinner",attrs:{size:"22px",icon:"action"===t.state?"fa-spinner":"fa-arrow-down",rotate:"preaction"===t.state&&180,spin:"action"===t.state}})],1),n("div",[null===t.defaultGroup?n("div",{staticStyle:{"text-align":"center",margin:"15px 15px"}},[t._v("Выберите группу как основную, для того чтобы отображать её расписание на данной странице")]):n("div",[n("h5",{staticStyle:{margin:"10px"}},[t._v("Группа "+t._s(t.defaultGroup))]),t._l(t.groupData.rasp,function(e){return n("v-ons-list",{key:e.date,staticStyle:{"margin-bottom":"10px"}},[n("v-ons-list-header",[t._v(t._s(e.date))]),t._l(e.lessons,function(e){return n("v-ons-list-item",{key:e.num},[n("div",{staticClass:"center"},[n("span",{staticClass:"list-item__title"},[t._v(t._s(e.num)+" пара")]),n("span",{staticClass:"list-item__subtitle"},[t._v(t._s(e.name))])]),n("div",{staticClass:"right"},[t._v(t._s(e.cab))])])})],2)}),null===t.defaultGroup?n("div",{staticStyle:{padding:"0 10px 0 10px"}},[n("v-ons-button",{attrs:{modifier:"large"},on:{click:t.setGroupAsDefault}},[t._v("Установить как основную группу")])],1):t._e(),n("div",{staticClass:"last_update",staticStyle:{margin:"10px"}},[t._v("Последнее обновление: "+t._s(t.groupData.last_update))])],2)])],1)},p=[],f="https://salinc.ru/rasp/api.php";function v(){return fetch(f+"?method=groups").then(function(t){return t.json()})}function d(t){return fetch(f+"?method=rasp&type=group&group="+encodeURIComponent(t)).then(function(t){return t.json()})}var g={data:function(){return{defaultGroup:null,groupData:null,state:"initial",ratio:0}},methods:{md:function(){return this.$ons.platform.isAndroid()},onPull:function(t){this.ratio=t},updateRasp:function(t){var e=this;this.defaultGroup?d(this.defaultGroup).then(function(n){e.$store.commit("SET_LAST_RASP",n),t()}).catch(function(n){e.$ons.notification.toast("Не удалось загрузить расписание группы",{timeout:2e3}),t()}):t()}},mounted:function(){var t=this;this.defaultGroup=this.$store.getters.SETTINGS.group,null!=this.defaultGroup&&this.updateRasp(function(){}),this.groupData=this.$store.getters.LAST_RASP,this.$store.watch(function(t,e){return e.LAST_RASP},function(e,n){t.groupData=e}),this.$store.watch(function(t,e){return e.SETTINGS.group},function(e,n){t.defaultGroup=e,t.updateRasp(function(){})})}},m=g,h=(n("c97f"),n("2877")),_=Object(h["a"])(m,c,p,!1,null,null,null),b=_.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[t.offline?n("div",{staticStyle:{margin:"10px","text-align":"center"}},[t._v("Просмотр групп недоступен без интернета")]):[n("div",{staticStyle:{margin:"10px"}},[n("v-ons-search-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Поиск группы"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("v-ons-list",t._l(t.groupsList,function(e){return n("v-ons-list-item",{key:e,attrs:{modifier:"chevron",tappable:""},on:{click:function(n){return t.openGroup(e)}}},[t._v(t._s(e))])}),1)]],2)},E=[],k=(n("6762"),n("2fdb"),n("386d"),n("55dd"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",[t._v("Назад")])],1),n("div",{staticClass:"center"},[t._v("Расписание "+t._s(t.groupName))])]),n("div",[t._l(t.groupData.rasp,function(e){return n("v-ons-list",{key:e.date,staticStyle:{"margin-bottom":"10px"}},[n("v-ons-list-header",[t._v(t._s(e.date))]),t._l(e.lessons,function(e){return n("v-ons-list-item",{key:e.num},[n("div",{staticClass:"center"},[n("span",{staticClass:"list-item__title"},[t._v(t._s(e.num)+" пара")]),n("span",{staticClass:"list-item__subtitle"},[t._v(t._s(e.name))])]),n("div",{staticClass:"right"},[t._v(t._s(e.cab))])])})],2)}),null===t.defaultGroup?n("div",{staticStyle:{padding:"0 10px 0 10px"}},[n("v-ons-button",{attrs:{modifier:"large"},on:{click:t.setGroupAsDefault}},[t._v("Установить как основную группу")])],1):t._e(),n("div",{staticClass:"last_update"},[t._v("Последнее обновление: "+t._s(t.groupData.last_update))])],2)],1)}),y=[],P={name:"ViewGroupPage",data:function(){return{groupData:{last_update:"Загрузка...",group:"",rasp:[]},defaultGroup:""}},props:{groupName:{type:String,required:!0}},methods:{setGroupAsDefault:function(){var t=this;this.$ons.notification.confirm("Вы точно хотите сделать группу ".concat(this.groupData.group," основной?"),{title:"Установить группу",buttonLabels:["Отмена","Да"]}).then(function(e){1===e&&(t.$store.commit("SET_LAST_RASP",t.groupData),t.$store.commit("SET_GROUP",t.groupData.group),t.defaultGroup=t.groupData.group,t.$ons.notification.alert("Группа ".concat(t.groupData.group," установлена в качестве основной.\n\nПоменять основную группу можно в настройках."),{title:"Группа установлена"}))})}},mounted:function(){var t=this;this.defaultGroup=this.$store.getters.SETTINGS.group,d(this.groupName).then(function(e){return t.groupData=e}).catch(function(e){t.$ons.notification.toast("Не удалось загрузить расписание группы",{timeout:2e3}),done()})}},A=P,T=(n("88bb"),Object(h["a"])(A,k,y,!1,null,null,null)),G=T.exports,w={name:"GroupsPage",data:function(){return{groups:{last_update:"Нет",groups:[]},search:"",offline:!1}},methods:{openGroup:function(t){this.$store.commit("PUSH_PAGE",{extends:G,onsNavigatorProps:{groupName:t}})}},mounted:function(){var t=this;v().then(function(e){return t.groups=e}).catch(function(e){t.offline=!0})},computed:{groupsList:function(){var t=this,e=this.groups.groups.sort();return this.search&&(e=e.filter(function(e){return e.toLowerCase().includes(t.search.toLowerCase())})),e}}},$=w,x=Object(h["a"])($,S,E,!1,null,null,null),C=x.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-list",t._l(t.rings,function(e){return n("v-ons-list-item",{key:e.num},[n("span",{staticClass:"list-item__title"},[t._v(t._s(e.num)+" пара")]),n("span",{staticClass:"list-item__subtitle"},[t._v(t._s(e.time)+" (перерыв "+t._s(e.break)+")")])])}),1)],1)},O=[],N={data:function(){return{rings:[{num:1,time:"08:30 - 10:05",break:"09:15 - 09:20"},{num:2,time:"10:25 - 12:00",break:"11:10 - 11:15"},{num:3,time:"12:30 - 14:05",break:"13:15 - 13:20"},{num:4,time:"14:15 - 15:50",break:"15:00 - 15:05"},{num:5,time:"16:00 - 17:35",break:"16:45 - 16:50"},{num:6,time:"17:45 - 19:20",break:"18:30 - 18:35"},{num:7,time:"19:25 - 21:00",break:"20:10 - 20:15"}]}}},I=N,j=Object(h["a"])(I,L,O,!1,null,null,null),R=j.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"center"},[t._v("Настройки")]),n("div",{staticClass:"left"},[n("v-ons-back-button",[t._v("Назад")])],1)]),n("v-ons-list",[n("v-ons-list-header",[t._v("Расписание")]),n("v-ons-list-item",{attrs:{modifier:"chevron",tappable:""},on:{click:t.openGroupsPage}},[t._v("Сменить группу")]),n("v-ons-list-item",{attrs:{tappable:""},on:{click:t.resetSettings}},[t._v("Сброс настроек")]),n("v-ons-list-header",[t._v("Приложение")]),null!==t.installEvent?n("v-ons-list-item",{attrs:{modifier:"chevron",tappable:""},on:{click:t.installPWA}},[t._v("Установить")]):t._e(),n("v-ons-list-item",{attrs:{modifier:"chevron",tappable:""},on:{click:t.openAboutPage}},[t._v("О программе")])],1),n("div",{staticClass:"bottom"},[t._v("Версия приложения "+t._s(t.ver.version)+" от "+t._s(t.ver.date))])],1)},U=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"center"},[t._v("О программе")]),n("div",{staticClass:"left"},[n("v-ons-back-button",[t._v("Назад")])],1)]),n("div",[n("h2",{staticStyle:{margin:"10px"}},[t._v("Расписание СИК")]),n("v-ons-list",{staticStyle:{"margin-bottom":"10px"}},[n("v-ons-list-item",{attrs:{modifier:"chevron",tappable:""},on:{click:function(e){return t.openUrl("https://github.com/SalincRu/RaspApp")}}},[n("div",{staticClass:"left"},[n("v-ons-icon",{attrs:{size:"25px",icon:"mdi-github-circle"}})],1),n("div",{staticClass:"center"},[t._v("GitHub")])])],1),n("div",{staticClass:"content"},[n("h3",[t._v("Список изменений")]),t._l(t.changelog,function(e){return n("div",{key:e.version},[n("h4",[t._v(t._s(e.version)+" - "+t._s(e.date))]),n("ul",t._l(e.changes,function(e){return n("li",{key:e,attrs:{modifier:"longdivider"}},[t._v(t._s(e))])}),0)])})],2)],1)],1)},J=[],M=[{version:"1.1.2",date:"06.09.2019",changes:["Что-то там сделали чтобы лучше работало на iPhone (у нас его, кстати, нету поэтому не проверяли)"]},{version:"1.1.1",date:"05.09.2019",changes:["Добавлена ссылка на GitHub","Мелкие изменения"]},{version:"1.1.0",date:"03.09.2019",changes:["Добавлена возможность выбора основной группы"]},{version:"1.0.0",date:"02.09.2019",changes:["Первая версия"]}],V={data:function(){return{changelog:M,hostname:location.hostname}},methods:{openUrl:function(t){window.open(t,"_blank")}}},K=V,q=(n("e0d1"),Object(h["a"])(K,H,J,!1,null,null,null)),z=q.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"center"},[t._v("Выбор группы")]),n("div",{staticClass:"left"},[n("v-ons-back-button",[t._v("Назад")])],1)]),t.offline?n("div",{staticStyle:{margin:"10px","text-align":"center"}},[t._v("Просмотр групп недоступен без интернета")]):[n("div",{staticStyle:{margin:"10px"}},[n("v-ons-search-input",{staticStyle:{width:"100%"},attrs:{placeholder:"Поиск группы"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("v-ons-list",t._l(t.groupsList,function(e){return n("v-ons-list-item",{key:e,attrs:{tappable:""},on:{click:function(n){return t.selectGroup(e)}}},[t._v(t._s(e))])}),1)]],2)},W=[],B={name:"GroupsPage",data:function(){return{groups:{last_update:"Загрузка...",groups:[]},search:"",offline:!1}},methods:{selectGroup:function(t){var e=this;this.$ons.notification.confirm("Вы точно хотите сделать группу ".concat(t," основной?"),{title:"Установить группу",buttonLabels:["Отмена","Да"]}).then(function(n){1===n&&(e.$store.commit("SET_LAST_RASP",{last_update:"Нет",group:t,rasp:[]}),e.$store.commit("SET_GROUP",t),e.$ons.notification.alert("Группа ".concat(t," установлена в качестве основной."),{title:"Группа установлена"}))})}},mounted:function(){var t=this;v().then(function(e){return t.groups=e}).catch(function(e){t.offline=!0})},computed:{groupsList:function(){var t=this,e=this.groups.groups.sort();return this.search&&(e=e.filter(function(e){return e.toLowerCase().includes(t.search.toLowerCase())})),e}}},Q=B,X=Object(h["a"])(Q,F,W,!1,null,null,null),Y=X.exports,Z={name:"SettingsPage",data:function(){return{installEvent:null,ver:M[0]}},methods:{openAboutPage:function(){this.$store.commit("PUSH_PAGE",z)},openGroupsPage:function(){this.$store.commit("PUSH_PAGE",Y)},resetSettings:function(){var t=this;this.$ons.notification.confirm("Вы действительно хотите сбросить настройки приложения?",{title:"Сброс настроек",buttonLabels:["Отмена","Да"]}).then(function(e){1===e&&t.$store.dispatch("resetSettings")})},installPWA:function(){this.installEvent.prompt()}},mounted:function(){this.installEvent=this.$store.getters.INSTALL_EVENT}},tt=Z,et=(n("99b8"),Object(h["a"])(tt,D,U,!1,null,null,null)),nt=et.exports,ot={name:"MainPage",data:function(){return{}},computed:{tabs:function(){return[{label:"Главная",icon:this.md()?null:"mdi-home",page:b},{label:"Группы",icon:this.md()?null:"mdi-account-group",page:C},{label:"Звонки",icon:this.md()?null:"mdi-bell-outline",page:R}]}},methods:{md:function(){return this.$ons.platform.isAndroid()},openSettings:function(){this.$store.commit("PUSH_PAGE",nt)}}},st=ot,it=Object(h["a"])(st,u,l,!1,null,null,null),at=it.exports,rt={data:function(){return{pageStack:[at]}},mounted:function(){var t=this;window.addEventListener("beforeinstallprompt",function(e){e.preventDefault(),t.$store.commit("SET_INSTALL_EVENT",e),t.$ons.notification.confirm("Хотите установить приложение на телефон?",{title:"Установка приложения",buttonLabels:["Отмена","Да"]}).then(function(t){1===t&&e.prompt()})})},created:function(){var t=this;this.PAGE_STACK=this.$store.getters.PAGE_STACK,this.$store.watch(function(t,e){return e.PAGE_STACK},function(e,n){t.pageStack=e}),this.$store.commit("PUSH_PAGE",at)}},ut=rt,lt=Object(h["a"])(ut,a,r,!1,null,null,null),ct=lt.exports,pt=n("2f62");o["a"].use(pt["a"]);var ft=new pt["a"].Store({state:{pageStack:[],settings:{group:null},installEvent:null,lastRasp:null},getters:{PAGE_STACK:function(t){return t.pageStack},SETTINGS:function(t){return t.settings},INSTALL_EVENT:function(t){return t.installEvent},LAST_RASP:function(t){return t.lastRasp}},mutations:{PUSH_PAGE:function(t,e){t.pageStack.push(e)},SET_SETTINGS:function(t,e){t.settings=e,localStorage.setItem("settings",JSON.stringify(t.settings))},SET_GROUP:function(t,e){t.settings.group=e,localStorage.setItem("settings",JSON.stringify(t.settings))},SET_INSTALL_EVENT:function(t,e){t.installEvent=e},SET_LAST_RASP:function(t,e){t.lastRasp=e,localStorage.setItem("rasp",JSON.stringify(t.lastRasp))}},actions:{init:function(){if(localStorage.getItem("settings"))try{this.commit("SET_SETTINGS",JSON.parse(localStorage.getItem("settings")))}catch(t){localStorage.removeItem("settings")}if(localStorage.getItem("rasp"))try{this.commit("SET_LAST_RASP",JSON.parse(localStorage.getItem("rasp")))}catch(t){localStorage.removeItem()}},resetSettings:function(){localStorage.removeItem("settings"),localStorage.removeItem("rasp"),window.location.reload()}}}),vt=n("9483");Object(vt["a"])("".concat("/app/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),window.alert("Обновление загружено, приложение будет перезапущено"),window.location.reload(!0)},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),o["a"].config.productionTip=!1,o["a"].use(i.a),new o["a"]({store:ft,render:function(t){return t(ct)},beforeCreate:function(){this.$ons.disableIconAutoPrefix(),this.$store.dispatch("init")}}).$mount("#app")},"88bb":function(t,e,n){"use strict";var o=n("07af"),s=n.n(o);s.a},"99b8":function(t,e,n){"use strict";var o=n("32ae"),s=n.n(o);s.a},c97f:function(t,e,n){"use strict";var o=n("1bc3"),s=n.n(o);s.a},e0d1:function(t,e,n){"use strict";var o=n("567f"),s=n.n(o);s.a}});
//# sourceMappingURL=app.aa531aca.js.map